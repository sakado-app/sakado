<!--
    Sakado, an app for school
    Copyright (c) 2017-2018 Adrien 'Litarvan' Navratil

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->
<ion-header>
  <ion-navbar color="primary">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Sakado - Connexion</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <img id="app-logo" src="assets/imgs/logo.svg" />

  <h1>Se connecter</h1>
  <h2 id="login-help">Utilisez les identifiants de la plateforme en ligne de votre lyc√©e (ex: ENT, Pronote)</h2>

  <form [formGroup]="loginForm" (ngSubmit)="login()" id="login-form" novalidate>
    <ion-item>
      <ion-label floating>Nom d'utilisateur</ion-label>
      <ion-input id="username" [readonly]="logging" formControlName="username"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label floating>Mot de passe</ion-label>
      <ion-input id="password" type="password" [readonly]="logging" [clearOnEdit]="!logging" formControlName="password"></ion-input>
    </ion-item>
    <ion-item class="establishment-item">
      <ion-label floating>Etablissement</ion-label>
      <ion-select [(ngModel)]="selectedEstablishment" [ngModelOptions]="{standalone: true}" [disabled]="logging">
        <ion-option value="loading">Selectionner...</ion-option>
        <ion-option *ngFor="let establishment of establishments" [value]="establishment">{{ establishment }}</ion-option>
      </ion-select>
    </ion-item>

    <button ion-button [disabled]="loginForm.invalid || selectedEstablishment == 'loading' || logging" id="login">Se Connecter</button>
  </form>
</ion-content>
